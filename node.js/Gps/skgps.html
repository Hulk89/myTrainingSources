<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>simpleMap</title>
        <script src="https://apis.skplanetx.com/tmap/js?version=1&format=javascript&appKey=365dae4f-49b5-314e-b0f4-bf8ce75f6508"></script>
        <script type="text/javascript">
          //초기화 함수
function initTmap(){
    centerLL = new Tmap.LonLat(127.072782126, 37.5158640777);
    map = new Tmap.Map({div:'map_div',
                        width:'100%', 
                        height:'400px',
                        transitionEffect:"resize",
                        animation:true
                    }); 
    searchRoute();
};
//경로 정보 로드
function searchRoute(){
    var routeFormat = new Tmap.Format.KML({extractStyles:true, extractAttributes:true});
    var startX = STARTX;//14129105.461214;
    var startY = STARTY;//4517042.1926406;
    var endX = 14149025.3196;
    var endY = 4511931.12626;
    var startName = "홍대입구";
    var endName = "명동";
    var urlStr = "https://apis.skplanetx.com/tmap/routes/pedestrian?version=1&format=xml";
        urlStr += "&startX="+startX;
        urlStr += "&startY="+startY;
        urlStr += "&endX="+endX;
        urlStr += "&endY="+endY;
        urlStr += "&startName="+encodeURIComponent(startName);
        urlStr += "&endName="+encodeURIComponent(endName);
        urlStr += "&appKey=365dae4f-49b5-314e-b0f4-bf8ce75f6508";
    var prtcl = new Tmap.Protocol.HTTP({
                                        url: urlStr,
                                        format:routeFormat
                                        });
    var routeLayer = new Tmap.Layer.Vector("route", {protocol:prtcl, strategies:[new Tmap.Strategy.Fixed()]});
    routeLayer.events.register("featuresadded", routeLayer, onDrawnFeatures);
    map.addLayer(routeLayer);
};
//경로 그리기 후 해당영역으로 줌
function onDrawnFeatures(e){
    map.zoomToExtent(this.getDataExtent());
    document.getElementById("total_time").innerHTML = e.feature.attributes.description;
};  
 </script>
    </head>

    <body onload="initTmap()">
	<div id="map_div"></div>
	<div id="total_time"></div>
    </body>

</html>
